{% extends "dashboard/dashboard.html" %}

{% block title %}Change Password{% endblock %}

{% block dashboard_content %}

<div class="control-bar">
  <h5 class="control-bar-title">
    <img src="{{ url_for('static', filename='icons/edituser-white.svg') }}" alt="Change Password" class="btn-icon">
    Cambio de Contrase√±a
  </h5>
  <button class="button-link back-btn" data-back="/">
    <img src="{{ url_for('static', filename='icons/arrow-back-white.svg') }}" alt="Back" class="btn-icon">
    Regresar
  </button>
</div>

<div class="box md dark left auto-expand">

  <form id="change-password-form" data-action="/auth/change-password" class="form horizontal">

    <div class="row horizontal">
      <label class="label dark md left" for="old_password">
        <img src="{{ url_for('static', filename='icons/key-white.svg') }}" alt="Actual" class="label-icon">
        Contrase√±a actual:
      </label>
      <div class="password-wrapper">
        <input type="password" class="input lg password-input" id="old_password" name="old_password" autocomplete="current-password" placeholder="Contrase√±a actual" required>
        <button type="button" class="toggle-password" aria-label="Mostrar/Ocultar contrase√±a">
          <img src="{{ url_for('static', filename='icons/eye-open-black.svg') }}" alt="Mostrar" class="eye-icon">
        </button>
      </div>
    </div>

    <div class="row horizontal">
      <label class="label dark md left" for="new_password">
        <img src="{{ url_for('static', filename='icons/key-white.svg') }}" alt="Nueva" class="label-icon">
        Nueva contrase√±a:
      </label>
      <div class="password-wrapper">
        <input type="password" class="input lg password-input" id="new_password" name="new_password" autocomplete="new-password" placeholder="Nueva contrase√±a" required data-password-check>
        <button type="button" class="toggle-password" aria-label="Mostrar/Ocultar contrase√±a">
          <img src="{{ url_for('static', filename='icons/eye-open-black.svg') }}" alt="Mostrar" class="eye-icon">
        </button>
      </div>
    </div>

    <!-- üõ°Ô∏è Validaci√≥n visual de nueva contrase√±a -->
    <div id="password-criteria" class="password-criteria-row">
      <span id="lenCheck" class="password-label">‚ùå 8 caracteres</span>
      <span id="lowerCheck" class="password-label">‚ùå min√∫scula</span>
      <span id="upperCheck" class="password-label">‚ùå May√∫scula</span>
      <span id="digitCheck" class="password-label">‚ùå N√∫mero</span>
      <span id="symbolCheck" class="password-label">‚ùå S√≠mbolo</span>
    </div>

    <div class="row horizontal">
      <label class="label dark md left" for="confirm_password">
        <img src="{{ url_for('static', filename='icons/key-white.svg') }}" alt="Confirmar" class="label-icon">
        Confirmar:
      </label>
      <div class="password-wrapper">
        <input type="password" class="input lg password-input" id="confirm_password" name="confirm_password" autocomplete="new-password" placeholder="Confirmar contrase√±a" required>
        <button type="button" class="toggle-password" aria-label="Mostrar/Ocultar contrase√±a">
          <img src="{{ url_for('static', filename='icons/eye-open-black.svg') }}" alt="Mostrar" class="eye-icon">
        </button>
      </div>
    </div>

    <div id="flash-messages" class="flashes"></div>

    <div class="box button-layout">
      <button type="submit" class="button button-success button-icon">
        <img src="{{ url_for('static', filename='icons/pen-white.svg') }}" alt="Editar" class="label-icon">
        Change Password
      </button>
    </div>

  </form>
</div>
<!-- üîπ JavaScript is already included in base.html or externally -->

{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/components/sidebar.js') }}?v={{ ASSET_VERSION }}"></script>
  <script src="{{ url_for('static', filename='js/auth/change_password.js') }}" type="module"></script>
  <script src="{{ url_for('static', filename='js/auth/password.js') }}?v={{ ASSET_VERSION }}" type="module"></script>
{% endblock %}





