{% extends "shared/main.html" %}

{% block title %}Reset Password{% endblock %}

{% block content %}
  <section class="section section-secondary">
    <div class="box dark center">

      <form id="reset-password-form"
        data-action="{{ url_for('auth.reset_password.reset_password') }}"
        data-token="{{ token }}"
        class="form horizontal">

        <h3 class="box-title-white">
          <img src="{{ url_for('static', filename='icons/edituser-white.svg') }}" alt="Reset Password" class="label-icon">
          Reset Password
        </h3>

        <div class="row horizontal">
          <label class="label dark md left" for="new_password">
            <img src="{{ url_for('static', filename='icons/key-white.svg') }}" alt="Nueva" class="label-icon">
            Nueva contrase√±a:
          </label>
          <div class="password-wrapper">
            <input type="password" class="input lg password-input" id="new_password" name="new_password" placeholder="Nueva contrase√±a" required data-password-check>
            <button type="button" class="toggle-password" aria-label="Mostrar/Ocultar contrase√±a">
              <img src="{{ url_for('static', filename='icons/eye-open-black.svg') }}" alt="Mostrar" class="eye-icon">
            </button>
          </div>
        </div>

        <!-- üõ°Ô∏è Validaci√≥n visual de nueva contrase√±a -->
        <div id="password-criteria" class="password-criteria-row">
          <span id="lenCheck" class="password-label">‚ùå 8 caracteres</span>
          <span id="lowerCheck" class="password-label">‚ùå min√∫scula</span>
          <span id="upperCheck" class="password-label">‚ùå May√∫scula</span>
          <span id="digitCheck" class="password-label">‚ùå N√∫mero</span>
          <span id="symbolCheck" class="password-label">‚ùå S√≠mbolo</span>
        </div>

        <div class="row horizontal">
          <label class="label dark md left" for="confirm_password">
            <img src="{{ url_for('static', filename='icons/key-white.svg') }}" alt="Confirmar" class="label-icon">
            Confirmar:
          </label>
          <div class="password-wrapper">
            <input type="password" class="input lg password-input" id="confirm_password" name="confirm_password" placeholder="Confirmar contrase√±a" required>
            <button type="button" class="toggle-password" aria-label="Mostrar/Ocultar contrase√±a">
              <img src="{{ url_for('static', filename='icons/eye-open-black.svg') }}" alt="Mostrar" class="eye-icon">
            </button>
          </div>
        </div>

        <div id="flash-messages" class="flashes"></div>

        <div class="box button-layout">
          <button type="submit" class="button button-success button-icon">
            <img src="{{ url_for('static', filename='icons/pen-white.svg') }}" alt="Editar" class="label-icon">
            Restablecer Contrase√±a
          </button>
        </div>

      </form>
    </div>
  </section>

{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/components/sidebar.js') }}?v={{ ASSET_VERSION }}"></script>
  <script src="{{ url_for('static', filename='js/auth/reset_password.js') }}" type="module"></script>
  <script src="{{ url_for('static', filename='js/auth/password.js') }}?v={{ ASSET_VERSION }}" type="module"></script>
{% endblock %}